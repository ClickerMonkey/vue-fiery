{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-fiery.js","webpack:///webpack/bootstrap 1971e5cba3a2715a1eef","webpack:///./src/index.ts","webpack:///./src/plugin.ts","webpack:///./src/mixin.ts","webpack:///./src/util.ts","webpack:///./src/constants.ts","webpack:///./src/entry.ts","webpack:///./src/options.ts","webpack:///./src/operations.ts","webpack:///./src/factory/index.ts","webpack:///./src/factory/document.ts","webpack:///./src/documents.ts","webpack:///./src/factory/map.ts","webpack:///./src/factory/collection.ts"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","plugin_1","default","install","Vue","mixin","beforeCreate","mixin_1","init","created","link","beforeDestroy","destroy","window","use","_this","$fiery","factory_1","factoryInstance","stores","storeKeyNext","storeIdToKey","options","optionKeyNext","entry","entryList","update","operations","bind","sync","remove","clear","ref","getMetadata","data","util_1","$fires","forEach","entry_1","closeEntry","i","length","parent","property","prop","target","source","isObject","x","prototype","toString","isFunction","isArray","Array","isCollectionSource","iterable","callback","vm","uid","constants_1","PROP_UID","_a","split","UID_SEPARATOR","storeKey","optionKey","path","store","parseInt","createRecord","record","recordOptions","recordFunctions","PROP_VALUE","ENTRY_SEPARATOR","STORE_SEPARATOR","RECORD_OPTIONS","off","getEntry","optionsInput","entryKeyInput","useRawOptions","options_1","getOptions","newCollection","newDocument","entryKey","fiery","fires","existing","children","index","push","onError","message","onMissing","onSuccess","results","onRemove","liveOptions","propValue","fields","excludeSubs","sub","props","type","typeConstructor_1","encoded","map","exclude","excludeArray","key","excludeMap","recordOperation","subProp","subOptions","values","getValues","doc","set","delete","propsArray","deleting","deleteCount","_i","propsArray_1","firebaseRuntime","app","firebase_","firestore","FieldValue","collection","explicit","include","chosenFactory","where","map_1","collection_1","document_1","once","promise","get","onceOptions","then","handleDocumentUpdate","catch","onSnapshot","exists","documents_1","refreshDocument","reset","parseDocument","out","replace","replaced","copyData","identifier","getDocumentIdentifier","subEntryKey","subEntry","$set","destroyDocuments","fromObject","old","destroyDocument","$delete","getStoreKey","_firestore","db","_databaseId","database","projectId","query","querySnapshot","missing","updated","docChanges","change","splice","newIndex","oldIndex"],"mappings":"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","file":"vue-fiery.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueFiery\"] = factory();\n\telse\n\t\troot[\"VueFiery\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueFiery\"] = factory();\n\telse\n\t\troot[\"VueFiery\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar plugin_1 = __webpack_require__(1);\n\texports.default = plugin_1.default;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar mixin_1 = __webpack_require__(2);\n\tfunction install(Vue) {\n\t    Vue.mixin({\n\t        beforeCreate: mixin_1.init,\n\t        created: mixin_1.link,\n\t        beforeDestroy: mixin_1.destroy\n\t    });\n\t}\n\texports.install = install;\n\tif (typeof window !== 'undefined' && window.Vue) {\n\t    window.Vue.use(install);\n\t}\n\texports.default = install;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar util_1 = __webpack_require__(3);\n\tvar entry_1 = __webpack_require__(5);\n\tvar operations = __webpack_require__(7);\n\tvar factory_1 = __webpack_require__(8);\n\tfunction init() {\n\t    var _this = this;\n\t    this.$fiery = factory_1.factoryInstance(this);\n\t    this.$fiery.stores = {};\n\t    this.$fiery.storeKeyNext = 0;\n\t    this.$fiery.storeIdToKey = {};\n\t    this.$fiery.options = {};\n\t    this.$fiery.optionKeyNext = 0;\n\t    this.$fiery.entry = {};\n\t    this.$fiery.entryList = [];\n\t    this.$fiery.update = operations.update.bind(this);\n\t    this.$fiery.sync = operations.sync.bind(this);\n\t    this.$fiery.remove = operations.remove.bind(this);\n\t    this.$fiery.clear = operations.clear.bind(this);\n\t    this.$fiery.ref = operations.ref.bind(this);\n\t    this.$fiery.link = link.bind(this);\n\t    this.$fiery.destroy = destroy.bind(this);\n\t    this.$fiery.getMetadata = function (data) { return util_1.getMetadata(_this, data); };\n\t    this.$fires = {};\n\t}\n\texports.init = init;\n\tfunction destroy() {\n\t    this.$fiery.stores = {};\n\t    this.$fiery.entry = {};\n\t    this.$fiery.entryList.forEach(entry_1.closeEntry);\n\t    this.$fiery.entryList = [];\n\t    this.$fiery = (function () { });\n\t    this.$fires = {};\n\t}\n\texports.destroy = destroy;\n\tfunction link() {\n\t    var entryList = this.$fiery.entryList;\n\t    for (var i = 0; i < entryList.length; i++) {\n\t        var entry = entryList[i];\n\t        if (entry === null) {\n\t            continue;\n\t        }\n\t        var options = entry.options;\n\t        if (!options.parent && !options.property) {\n\t            for (var prop in this) {\n\t                if (this[prop] === entry.target) {\n\t                    options.property = prop;\n\t                    this.$fiery.entry[prop] = entry;\n\t                    this.$fires[prop] = entry.source;\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t    }\n\t}\n\texports.link = link;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tfunction isObject(x) {\n\t    return Object.prototype.toString.call(x) === '[object Object]';\n\t}\n\texports.isObject = isObject;\n\tfunction isFunction(x) {\n\t    return typeof x === 'function';\n\t}\n\texports.isFunction = isFunction;\n\tfunction isArray(x) {\n\t    return x && x instanceof Array;\n\t}\n\texports.isArray = isArray;\n\tfunction isCollectionSource(source) {\n\t    return !!(source.where);\n\t}\n\texports.isCollectionSource = isCollectionSource;\n\tfunction forEach(iterable, callback) {\n\t    if (isArray(iterable)) {\n\t        for (var i = 0; i < iterable.length; i++) {\n\t            callback(iterable[i], i, iterable);\n\t        }\n\t        return true;\n\t    }\n\t    else if (isObject(iterable)) {\n\t        for (var prop in iterable) {\n\t            callback(iterable[prop], prop, iterable);\n\t        }\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\texports.forEach = forEach;\n\tfunction getMetadata(vm, data) {\n\t    var uid = data[constants_1.PROP_UID];\n\t    var _a = uid.split(constants_1.UID_SEPARATOR), storeKey = _a[0], optionKey = _a[1], path = _a[2];\n\t    var store = vm.$fiery.stores[parseInt(storeKey)];\n\t    var options = vm.$fiery.options[parseInt(optionKey)];\n\t    return { uid: uid, path: path, storeKey: storeKey, store: store, optionKey: optionKey, options: options };\n\t}\n\texports.getMetadata = getMetadata;\n\tfunction createRecord(data, options) {\n\t    if (options.record) {\n\t        var recordOptions = options.recordOptions;\n\t        var recordFunctions = options.recordFunctions;\n\t        if (recordOptions.sync)\n\t            data[recordOptions.sync] = recordFunctions.sync;\n\t        if (recordOptions.update)\n\t            data[recordOptions.update] = recordFunctions.update;\n\t        if (recordOptions.remove)\n\t            data[recordOptions.remove] = recordFunctions.remove;\n\t        if (recordOptions.clear)\n\t            data[recordOptions.clear] = recordFunctions.clear;\n\t        if (recordOptions.ref)\n\t            data[recordOptions.ref] = recordFunctions.ref;\n\t    }\n\t    return data;\n\t}\n\texports.createRecord = createRecord;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.PROP_VALUE = '.value';\n\texports.PROP_UID = '.uid';\n\texports.UID_SEPARATOR = '///';\n\texports.ENTRY_SEPARATOR = '/';\n\texports.STORE_SEPARATOR = '/';\n\texports.RECORD_OPTIONS = {\n\t    sync: '$sync',\n\t    update: '$update',\n\t    remove: '$remove',\n\t    ref: '$ref',\n\t    clear: '$clear'\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar util_1 = __webpack_require__(3);\n\tvar options_1 = __webpack_require__(6);\n\tfunction closeEntry(entry) {\n\t    if (entry && entry.off) {\n\t        entry.off();\n\t        delete entry.off;\n\t    }\n\t}\n\texports.closeEntry = closeEntry;\n\tfunction getEntry(vm, source, optionsInput, entryKeyInput, useRawOptions) {\n\t    if (useRawOptions === void 0) { useRawOptions = false; }\n\t    var options = useRawOptions\n\t        ? optionsInput\n\t        : options_1.getOptions(vm, optionsInput, source);\n\t    var target = util_1.isCollectionSource(source)\n\t        ? options.newCollection()\n\t        : options.newDocument();\n\t    var property = options.property;\n\t    var entryKey = entryKeyInput || property || '';\n\t    var fiery = vm.$fiery;\n\t    var fires = vm.$fires;\n\t    var existing = fiery.entry[entryKey];\n\t    var children = {};\n\t    var entry = { source: source, options: options, target: target, children: children };\n\t    if (existing) {\n\t        closeEntry(existing);\n\t        entry.target = existing.target;\n\t    }\n\t    if (!entryKey || !(entryKey in fiery.entry)) {\n\t        entry.index = fiery.entryList.length;\n\t        fiery.entryList.push(entry);\n\t    }\n\t    if (entryKey) {\n\t        fiery.entry[entryKey] = entry;\n\t    }\n\t    if (property) {\n\t        fires[property] = source;\n\t    }\n\t    return entry;\n\t}\n\texports.getEntry = getEntry;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tvar util_1 = __webpack_require__(3);\n\tvar operations = __webpack_require__(7);\n\tfunction getOptions(vm, options, source) {\n\t    if (!options || !util_1.isObject(options)) {\n\t        options = {};\n\t    }\n\t    if (!util_1.isFunction(options.onError)) {\n\t        options.onError = function (message) { };\n\t    }\n\t    if (!util_1.isFunction(options.onMissing)) {\n\t        options.onMissing = function () { };\n\t    }\n\t    if (!util_1.isFunction(options.onSuccess)) {\n\t        options.onSuccess = function (results) { };\n\t    }\n\t    if (!util_1.isFunction(options.onRemove)) {\n\t        options.onRemove = function () { };\n\t    }\n\t    if (!options.liveOptions) {\n\t        options.liveOptions = {};\n\t    }\n\t    if (!options.propValue) {\n\t        options.propValue = constants_1.PROP_VALUE;\n\t    }\n\t    if (!options.recordOptions) {\n\t        options.recordOptions = constants_1.RECORD_OPTIONS;\n\t    }\n\t    if (options.record) {\n\t        options.recordFunctions = {\n\t            sync: function (fields) {\n\t                return operations.sync.call(vm, this, fields);\n\t            },\n\t            update: function (fields) {\n\t                return operations.update.call(vm, this, fields);\n\t            },\n\t            remove: function (excludeSubs) {\n\t                if (excludeSubs === void 0) { excludeSubs = false; }\n\t                return operations.remove.call(vm, this, excludeSubs);\n\t            },\n\t            ref: function (sub) {\n\t                return operations.ref.call(vm, this, sub);\n\t            },\n\t            clear: function (props) {\n\t                return operations.clear.call(vm, this, props);\n\t            }\n\t        };\n\t    }\n\t    if (options.type) {\n\t        var typeConstructor_1 = options.type;\n\t        options.newDocument = function (encoded) { return new typeConstructor_1(); };\n\t    }\n\t    else if (!options.newDocument) {\n\t        options.newDocument = function (encoded) { return ({}); };\n\t    }\n\t    if (!options.newCollection) {\n\t        options.newCollection = options.map\n\t            ? function () { return ({}); }\n\t            : function () { return []; };\n\t    }\n\t    if (!options.exclude) {\n\t        options.exclude = {};\n\t        if (options.key) {\n\t            options.exclude[options.key] = true;\n\t        }\n\t    }\n\t    else if (util_1.isArray(options.exclude)) {\n\t        var excludeArray = options.exclude;\n\t        options.exclude = {};\n\t        for (var i = 0; i < excludeArray.length; i++) {\n\t            options.exclude[excludeArray[i]] = true;\n\t        }\n\t    }\n\t    var excludeMap = options.exclude;\n\t    excludeMap[options.propValue] = true;\n\t    excludeMap[constants_1.PROP_UID] = true;\n\t    for (var recordOperation in options.recordOptions) {\n\t        excludeMap[options.recordOptions[recordOperation]] = true;\n\t    }\n\t    if (options.sub) {\n\t        for (var subProp in options.sub) {\n\t            var subOptions = getOptions(vm, options.sub[subProp]);\n\t            subOptions.property = subProp;\n\t            subOptions.parent = options;\n\t            options.sub[subProp] = subOptions;\n\t            excludeMap[subProp] = true;\n\t        }\n\t    }\n\t    if (!options.id) {\n\t        var fiery = vm.$fiery;\n\t        options.id = ++fiery.optionKeyNext;\n\t        fiery.options[options.id] = options;\n\t    }\n\t    return options;\n\t}\n\texports.getOptions = getOptions;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar util_1 = __webpack_require__(3);\n\tfunction update(data, fields) {\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    if (store && path) {\n\t        var values = getValues(data, options, fields);\n\t        return store.doc(path).update(values);\n\t    }\n\t}\n\texports.update = update;\n\tfunction sync(data, fields) {\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    if (store && path) {\n\t        var values = getValues(data, options, fields);\n\t        return store.doc(path).set(values);\n\t    }\n\t}\n\texports.sync = sync;\n\tfunction remove(data, excludeSubs) {\n\t    var _this = this;\n\t    if (excludeSubs === void 0) { excludeSubs = false; }\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    if (store && path) {\n\t        if (!excludeSubs && options.sub) {\n\t            for (var subProp in options.sub) {\n\t                util_1.forEach(data[subProp], function (sub) {\n\t                    _this.remove(sub);\n\t                });\n\t            }\n\t        }\n\t        return store.doc(path).delete();\n\t    }\n\t}\n\texports.remove = remove;\n\tfunction clear(data, props) {\n\t    var _this = this;\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    var propsArray = props instanceof Array ? props : [props];\n\t    if (store && path) {\n\t        var doc = store.doc(path);\n\t        var deleting = {};\n\t        var deleteCount = 0;\n\t        for (var _i = 0, propsArray_1 = propsArray; _i < propsArray_1.length; _i++) {\n\t            var prop = propsArray_1[_i];\n\t            if (options.sub && prop in options.sub && data[prop]) {\n\t                util_1.forEach(data[prop], function (sub) {\n\t                    _this.remove(sub);\n\t                });\n\t            }\n\t            else if (prop in data) {\n\t                var firebaseRuntime = store.app.firebase_;\n\t                if (firebaseRuntime) {\n\t                    deleting[prop] = firebaseRuntime.firestore.FieldValue.delete();\n\t                    deleteCount++;\n\t                }\n\t            }\n\t        }\n\t        if (deleteCount > 0) {\n\t            return doc.update(deleting);\n\t        }\n\t    }\n\t}\n\texports.clear = clear;\n\tfunction ref(data, sub) {\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path;\n\t    if (store && path) {\n\t        var doc = store.doc(path);\n\t        return sub ? doc.collection(sub) : doc;\n\t    }\n\t}\n\texports.ref = ref;\n\tfunction getValues(data, options, fields) {\n\t    var explicit = fields || options.include;\n\t    var values = {};\n\t    if (explicit) {\n\t        for (var i = 0; i < explicit.length; i++) {\n\t            var prop = explicit[i];\n\t            if (prop in data) {\n\t                values[prop] = data[prop];\n\t            }\n\t        }\n\t    }\n\t    else {\n\t        for (var prop in data) {\n\t            if (!(prop in options.exclude)) {\n\t                values[prop] = data[prop];\n\t            }\n\t        }\n\t    }\n\t    return values;\n\t}\n\texports.getValues = getValues;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar entry_1 = __webpack_require__(5);\n\tvar document_1 = __webpack_require__(9);\n\tvar map_1 = __webpack_require__(11);\n\tvar collection_1 = __webpack_require__(12);\n\tfunction factory(vm, entry) {\n\t    var chosenFactory = entry.source.where\n\t        ? (entry.options.map ? map_1.default : collection_1.default)\n\t        : document_1.default;\n\t    return chosenFactory(vm, entry);\n\t}\n\texports.factory = factory;\n\tfunction factoryInstance(vm) {\n\t    return function (source, options) {\n\t        return factory(vm, entry_1.getEntry(vm, source, options));\n\t    };\n\t}\n\texports.factoryInstance = factoryInstance;\n\texports.default = factory;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar documents_1 = __webpack_require__(10);\n\tfunction factory(vm, entry) {\n\t    var source = entry.source;\n\t    var options = entry.options;\n\t    if (options.once) {\n\t        entry.promise = source.get(options.onceOptions)\n\t            .then(function (doc) {\n\t            handleDocumentUpdate(vm, entry, doc);\n\t        }).catch(options.onError);\n\t    }\n\t    else {\n\t        entry.off = source.onSnapshot(options.liveOptions, function (doc) {\n\t            handleDocumentUpdate(vm, entry, doc);\n\t        }, options.onError);\n\t    }\n\t    return entry.target;\n\t}\n\texports.factory = factory;\n\tfunction handleDocumentUpdate(vm, entry, doc) {\n\t    var options = entry.options;\n\t    if (!doc.exists) {\n\t        options.onMissing();\n\t    }\n\t    else {\n\t        entry.target = documents_1.refreshDocument(vm, entry, doc, entry.target);\n\t        if (options.reset && options.property) {\n\t            vm[options.property] = entry.target;\n\t        }\n\t        options.onSuccess(entry.target);\n\t    }\n\t}\n\texports.handleDocumentUpdate = handleDocumentUpdate;\n\texports.default = factory;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tvar util_1 = __webpack_require__(3);\n\tvar entry_1 = __webpack_require__(5);\n\tvar factory_1 = __webpack_require__(8);\n\tfunction parseDocument(doc, options) {\n\t    var _a;\n\t    var value = doc.data();\n\t    var out = (util_1.isObject(value) ? value : (_a = {}, _a[options.propValue] = value, _a));\n\t    if (out && options.key) {\n\t        out[options.key] = doc.id;\n\t    }\n\t    return out;\n\t}\n\texports.parseDocument = parseDocument;\n\tfunction refreshDocument(vm, entry, doc, data) {\n\t    var options = entry.options;\n\t    var property = options.property;\n\t    var replace = !!(options.reset && property);\n\t    var encoded = parseDocument(doc, options);\n\t    if (!data) {\n\t        var identifier = getDocumentIdentifier(vm, options, doc);\n\t        data = options.newDocument(encoded);\n\t        data[constants_1.PROP_UID] = identifier;\n\t        copyData(vm, data, encoded);\n\t        util_1.createRecord(data, options);\n\t        if (options.sub) {\n\t            for (var subProp in options.sub) {\n\t                var subOptions = options.sub[subProp];\n\t                var subEntryKey = doc.ref.path + constants_1.ENTRY_SEPARATOR + subProp;\n\t                var subEntry = entry_1.getEntry(vm, doc.ref.collection(subProp), subOptions, subEntryKey, true);\n\t                data[subProp] = factory_1.factory(vm, subEntry);\n\t            }\n\t        }\n\t    }\n\t    else if (replace) {\n\t        var replaced = options.newDocument(encoded);\n\t        if (options.sub) {\n\t            for (var subProp in options.sub) {\n\t                if (data[subProp]) {\n\t                    replaced[subProp] = data[subProp];\n\t                }\n\t            }\n\t        }\n\t        util_1.createRecord(replaced, options);\n\t        data = copyData(vm, replaced, encoded);\n\t    }\n\t    else {\n\t        copyData(vm, data, encoded);\n\t    }\n\t    return data;\n\t}\n\texports.refreshDocument = refreshDocument;\n\tfunction copyData(vm, data, update) {\n\t    for (var prop in update) {\n\t        vm.$set(data, prop, update[prop]);\n\t    }\n\t    return data;\n\t}\n\texports.copyData = copyData;\n\tfunction destroyDocuments(vm, map, fromObject) {\n\t    for (var id in map) {\n\t        var old = map[id];\n\t        destroyDocument(vm, old);\n\t        if (fromObject) {\n\t            vm.$delete(fromObject, id);\n\t        }\n\t    }\n\t}\n\texports.destroyDocuments = destroyDocuments;\n\tfunction destroyDocument(vm, data) {\n\t    var _a = util_1.getMetadata(vm, data), path = _a.path, options = _a.options;\n\t    if (options.sub) {\n\t        var fiery = vm.$fiery;\n\t        for (var subProp in options.sub) {\n\t            var subEntryKey = path + constants_1.ENTRY_SEPARATOR + subProp;\n\t            var subEntry = fiery.entry[subEntryKey];\n\t            if (subEntry) {\n\t                entry_1.closeEntry(subEntry);\n\t                delete fiery.entry[subEntryKey];\n\t                if (typeof subEntry.index === 'number') {\n\t                    fiery.entryList[subEntry.index] = null;\n\t                    delete subEntry.index;\n\t                }\n\t            }\n\t            util_1.forEach(data[subProp], function (value) {\n\t                destroyDocument(vm, value);\n\t            });\n\t        }\n\t    }\n\t}\n\texports.destroyDocument = destroyDocument;\n\tfunction getDocumentIdentifier(vm, options, doc) {\n\t    return getStoreKey(vm, doc) +\n\t        constants_1.UID_SEPARATOR +\n\t        options.id +\n\t        constants_1.UID_SEPARATOR +\n\t        doc.ref.path;\n\t}\n\texports.getDocumentIdentifier = getDocumentIdentifier;\n\tfunction getStoreKey(vm, doc) {\n\t    var firestore = doc._firestore;\n\t    var db = firestore._databaseId;\n\t    var id = db.database + constants_1.STORE_SEPARATOR + db.projectId;\n\t    var fiery = vm.$fiery;\n\t    var key = fiery.storeIdToKey[id];\n\t    if (!key) {\n\t        key = ++fiery.storeKeyNext;\n\t        fiery.stores[key] = firestore;\n\t        fiery.storeIdToKey[id] = key;\n\t    }\n\t    return key;\n\t}\n\texports.getStoreKey = getStoreKey;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar documents_1 = __webpack_require__(10);\n\tfunction factory(vm, entry) {\n\t    var options = entry.options;\n\t    var query = (options.query ? options.query(entry.source) : entry.source);\n\t    if (options.once) {\n\t        entry.promise = query.get(options.onceOptions)\n\t            .then(function (querySnapshot) {\n\t            var target = entry.target;\n\t            var missing = {};\n\t            for (var id in target) {\n\t                missing[id] = target[id];\n\t            }\n\t            querySnapshot.forEach(function (doc) {\n\t                var old = target[doc.id];\n\t                var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                vm.$set(target, doc.id, updated);\n\t                delete missing[doc.id];\n\t            }, options.onError);\n\t            documents_1.destroyDocuments(vm, missing, target);\n\t            options.onSuccess(target);\n\t        }).catch(options.onError);\n\t    }\n\t    else {\n\t        entry.off = query.onSnapshot(options.liveOptions, function (querySnapshot) {\n\t            var target = entry.target;\n\t            querySnapshot.docChanges().forEach(function (change) {\n\t                var doc = change.doc;\n\t                switch (change.type) {\n\t                    case 'modified':\n\t                    case 'added':\n\t                        var old = target[doc.id];\n\t                        var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                        vm.$set(target, doc.id, updated);\n\t                        break;\n\t                    case 'removed':\n\t                        documents_1.destroyDocument(vm, target[doc.id]);\n\t                        vm.$delete(target, doc.id);\n\t                        break;\n\t                }\n\t            }, options.onError);\n\t            options.onSuccess(target);\n\t        }, options.onError);\n\t    }\n\t    return entry.target;\n\t}\n\texports.default = factory;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tvar documents_1 = __webpack_require__(10);\n\tfunction factory(vm, entry) {\n\t    var options = entry.options;\n\t    var query = (options.query ? options.query(entry.source) : entry.source);\n\t    if (options.once) {\n\t        entry.promise = query.get(options.onceOptions)\n\t            .then(function (querySnapshot) {\n\t            var target = entry.target;\n\t            var missing = {};\n\t            for (var i = 0; i < target.length; i++) {\n\t                var old = target[i];\n\t                missing[old[constants_1.PROP_UID]] = old;\n\t            }\n\t            target.splice(0, target.length);\n\t            querySnapshot.forEach(function (doc) {\n\t                var old = missing[doc.id];\n\t                var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                target.push(updated);\n\t                delete missing[updated[constants_1.PROP_UID]];\n\t            }, options.onError);\n\t            documents_1.destroyDocuments(vm, missing);\n\t            options.onSuccess(target);\n\t        }).catch(options.onError);\n\t    }\n\t    else {\n\t        entry.off = query.onSnapshot(options.liveOptions, function (querySnapshot) {\n\t            var target = entry.target;\n\t            querySnapshot.docChanges().forEach(function (change) {\n\t                var doc = change.doc;\n\t                switch (change.type) {\n\t                    case 'added':\n\t                        var created = documents_1.refreshDocument(vm, entry, doc);\n\t                        target.splice(change.newIndex, 0, created);\n\t                        break;\n\t                    case 'removed':\n\t                        target.splice(change.oldIndex, 1);\n\t                        break;\n\t                    case 'modified':\n\t                        var old = target[change.oldIndex];\n\t                        var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                        if (change.oldIndex !== change.newIndex) {\n\t                            target.splice(change.oldIndex, 1);\n\t                            target.splice(change.newIndex, 0, updated);\n\t                        }\n\t                        else {\n\t                            target.splice(change.newIndex, 1, updated);\n\t                        }\n\t                        break;\n\t                }\n\t            }, options.onError);\n\t            options.onSuccess(target);\n\t        }, options.onError);\n\t    }\n\t    return entry.target;\n\t}\n\texports.factory = factory;\n\texports.default = factory;\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// vue-fiery.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1971e5cba3a2715a1eef","import VueFiery from './plugin'\n\nexport default VueFiery\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","\nimport { init, link, destroy } from './mixin'\n\n\n\nexport function installÂ (Vue: any)\n{\n  Vue.mixin({\n    beforeCreate: init,\n    created: link,\n    beforeDestroy: destroy\n  })\n}\n\nif (typeof window !== 'undefined' && (<any>window).Vue)\n{\n  (<any>window).Vue.use(install)\n}\n\nexport default install\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugin.ts","\n\nimport { FieryVue, FieryInstance, FieryInstanceFactory, FieryTarget, FierySource, FieryOptions, FieryEntry } from './types'\nimport { getMetadata } from './util'\nimport { getEntry, closeEntry } from './entry'\nimport * as operations from './operations'\nimport { factoryInstance } from './factory'\n\n\n\nexport function init (this: FieryVue): void\n{\n  this.$fiery = factoryInstance(this) as FieryInstance\n  this.$fiery.stores = {}\n  this.$fiery.storeKeyNext = 0\n  this.$fiery.storeIdToKey = {}\n  this.$fiery.options = {}\n  this.$fiery.optionKeyNext = 0\n  this.$fiery.entry = {}\n  this.$fiery.entryList = []\n  this.$fiery.update = operations.update.bind(this)\n  this.$fiery.sync = operations.sync.bind(this)\n  this.$fiery.remove = operations.remove.bind(this)\n  this.$fiery.clear = operations.clear.bind(this)\n  this.$fiery.ref = operations.ref.bind(this)\n  this.$fiery.link = link.bind(this)\n  this.$fiery.destroy = destroy.bind(this)\n  this.$fiery.getMetadata = (data) => getMetadata(this, data)\n  this.$fires = {}\n}\n\nexport function destroy (this: FieryVue): void\n{\n  this.$fiery.stores = {}\n  this.$fiery.entry = {}\n  this.$fiery.entryList.forEach(closeEntry)\n  this.$fiery.entryList = []\n  this.$fiery = <any>(() => {}) as FieryInstance\n  this.$fires = {}\n}\n\nexport function link (this: FieryVue): void\n{\n  const entryList: (FieryEntry | null)[] = this.$fiery.entryList\n\n  for (let i = 0; i < entryList.length; i++)\n  {\n    const entry: FieryEntry | null = entryList[i]\n\n    if (entry === null)\n    {\n      continue\n    }\n\n    const options: FieryOptions = entry.options\n\n    if (!options.parent && !options.property)\n    {\n      for (let prop in this)\n      {\n        if (this[prop] === entry.target)\n        {\n          options.property = prop\n\n          this.$fiery.entry[ prop ] = entry\n          this.$fires[ prop ] = entry.source\n\n          break\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mixin.ts","\nimport * as firebase from 'firebase'\n\n\nimport { PROP_UID, UID_SEPARATOR } from './constants'\nimport { FieryOptions, FierySource, FieryVue, FieryData, FieryMetadata } from './types'\n\n\ntype Firestore = firebase.firestore.Firestore\n\n\n\nexport function isObject (x?: any): boolean\n{\n  return Object.prototype.toString.call(x) === '[object Object]'\n}\n\nexport function isFunction (x?: any): boolean\n{\n  return typeof x === 'function'\n}\n\nexport function isArray (x?: any): boolean\n{\n  return x && x instanceof Array\n}\n\nexport function isCollectionSource (source: FierySource): boolean\n{\n  return !!((<any>source).where)\n}\n\nexport function forEach (iterable: any, callback: (item: any, key?: number | string, iterable?: any) => any): boolean\n{\n  if (isArray(iterable))\n  {\n    for (let i = 0; i < iterable.length; i++)\n    {\n      callback(iterable[i], i, iterable)\n    }\n\n    return true\n  }\n  else if (isObject(iterable))\n  {\n    for (let prop in iterable)\n    {\n      callback(iterable[prop], prop, iterable)\n    }\n\n    return true\n  }\n\n  return false\n}\n\nexport function getMetadata (vm: FieryVue, data: FieryData): FieryMetadata\n{\n  const uid: string = data[PROP_UID]\n  const [storeKey, optionKey, path] = uid.split(UID_SEPARATOR) as string[]\n  const store: Firestore = vm.$fiery.stores[parseInt(storeKey)]\n  const options: FieryOptions = vm.$fiery.options[parseInt(optionKey)]\n\n  return { uid, path, storeKey, store, optionKey, options }\n}\n\nexport function createRecord (data: FieryData, options: FieryOptions): FieryData\n{\n  if (options.record)\n  {\n    let recordOptions = options.recordOptions\n    let recordFunctions = options.recordFunctions\n\n    if (recordOptions.sync) data[recordOptions.sync] = recordFunctions.sync\n    if (recordOptions.update) data[recordOptions.update] = recordFunctions.update\n    if (recordOptions.remove) data[recordOptions.remove] = recordFunctions.remove\n    if (recordOptions.clear) data[recordOptions.clear] = recordFunctions.clear\n    if (recordOptions.ref) data[recordOptions.ref] = recordFunctions.ref\n  }\n\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.ts","\nexport const PROP_VALUE = '.value'\nexport const PROP_UID = '.uid'\nexport const UID_SEPARATOR = '///'\nexport const ENTRY_SEPARATOR = '/'\nexport const STORE_SEPARATOR = '/'\nexport const RECORD_OPTIONS = {\n  sync: '$sync',\n  update: '$update',\n  remove: '$remove',\n  ref: '$ref',\n  clear: '$clear'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","\n\nimport { isCollectionSource } from './util'\nimport { getOptions } from './options'\nimport { FieryOptions, FieryInstance, FieryTarget, FieryEntry, FierySources, FieryVue, FierySource } from './types'\n\n\nexport function closeEntry (entry: FieryEntry): void\n{\n  if (entry && entry.off)\n  {\n    entry.off()\n\n    delete entry.off\n  }\n}\n\nexport function getEntry (vm: FieryVue, source: FierySource, optionsInput?: Partial<FieryOptions>, entryKeyInput?: string, useRawOptions: boolean = false)\n{\n  const options: FieryOptions = useRawOptions\n    ? optionsInput as FieryOptions\n    : getOptions(vm, optionsInput, source)\n  const target: FieryTarget = isCollectionSource(source)\n    ? options.newCollection()\n    : options.newDocument()\n  const property: string | undefined = options.property\n  const entryKey: string = entryKeyInput || property || ''\n  const fiery: FieryInstance = vm.$fiery\n  const fires: FierySources = vm.$fires\n\n  let existing: FieryEntry | undefined = fiery.entry[ entryKey ]\n  let children = {}\n  let entry: FieryEntry = { source, options, target, children }\n\n  if (existing)\n  {\n    closeEntry(existing)\n\n    entry.target = existing.target\n  }\n\n  if (!entryKey || !(entryKey in fiery.entry))\n  {\n    entry.index = fiery.entryList.length\n\n    fiery.entryList.push(entry)\n  }\n\n  if (entryKey)\n  {\n    fiery.entry[ entryKey ] = entry\n  }\n\n  if (property)\n  {\n    fires[ property ] = source\n  }\n\n  return entry\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry.ts","\n\n\nimport { PROP_UID, PROP_VALUE, RECORD_OPTIONS } from './constants'\nimport { FieryOptions, FieryInstance, FieryVue, FieryExclusions, FierySource, FieryData, FieryMap } from './types'\nimport { isObject, isFunction, isArray } from './util'\nimport * as operations from './operations'\n\n\n\nexport function getOptions (vm: FieryVue, options?: Partial<FieryOptions>, source?: FierySource): FieryOptions\n{\n  if (!options || !isObject(options))\n  {\n    options = {}\n  }\n\n  if (!isFunction(options.onError))\n  {\n    options.onError = (message) => {}\n  }\n\n  if (!isFunction(options.onMissing))\n  {\n    options.onMissing = () => {}\n  }\n\n  if (!isFunction(options.onSuccess))\n  {\n    options.onSuccess = (results) => {}\n  }\n\n  if (!isFunction(options.onRemove))\n  {\n    options.onRemove = () => {}\n  }\n\n  if (!options.liveOptions)\n  {\n    options.liveOptions = {}\n  }\n\n  if (!options.propValue)\n  {\n    options.propValue = PROP_VALUE\n  }\n\n  if (!options.recordOptions)\n  {\n    options.recordOptions = RECORD_OPTIONS\n  }\n\n  if (options.record)\n  {\n    options.recordFunctions = {\n      sync: function(this: FieryData, fields?: string[]) {\n        return operations.sync.call(vm, this, fields)\n      },\n      update: function(this: FieryData, fields?: string[]) {\n        return operations.update.call(vm, this, fields)\n      },\n      remove: function(this: FieryData, excludeSubs: boolean = false) {\n        return operations.remove.call(vm, this, excludeSubs)\n      },\n      ref: function(this: FieryData, sub?: string) {\n        return operations.ref.call(vm, this, sub)\n      },\n      clear: function(this: FieryData, props: string | string[]) {\n        return operations.clear.call(vm, this, props)\n      }\n    }\n  }\n\n  if (options.type)\n  {\n    let typeConstructor = options.type\n\n    options.newDocument = (encoded?: FieryData) => (new typeConstructor() as FieryData)\n  }\n  else if (!options.newDocument)\n  {\n    options.newDocument = (encoded?: FieryData) => ({} as FieryData)\n  }\n\n  if (!options.newCollection)\n  {\n    options.newCollection = options.map\n      ? () => ({} as FieryMap)\n      : () => ([] as FieryData[])\n  }\n\n  if (!options.exclude)\n  {\n    options.exclude = {}\n\n    if (options.key)\n    {\n      options.exclude[options.key] = true\n    }\n  }\n  else if (isArray(options.exclude))\n  {\n    let excludeArray = options.exclude as string[]\n\n    options.exclude = {}\n\n    for (let i = 0; i < excludeArray.length; i++)\n    {\n      options.exclude[excludeArray[i]] = true\n    }\n  }\n\n  let excludeMap: FieryExclusions = options.exclude as FieryExclusions\n\n  excludeMap[options.propValue] = true\n  excludeMap[PROP_UID] = true\n\n  for (let recordOperation in options.recordOptions)\n  {\n    excludeMap[options.recordOptions[recordOperation]] = true\n  }\n\n  if (options.sub)\n  {\n    for (let subProp in options.sub)\n    {\n      let subOptions = getOptions(vm, options.sub[subProp] as Partial<FieryOptions>)\n\n      subOptions.property = subProp\n      subOptions.parent = options as FieryOptions\n\n      options.sub[subProp] = subOptions\n      excludeMap[subProp] = true\n    }\n  }\n\n  if (!options.id)\n  {\n    const fiery: FieryInstance = vm.$fiery\n\n    options.id = ++fiery.optionKeyNext\n\n    fiery.options[options.id] = options as FieryOptions\n  }\n\n  return options as FieryOptions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options.ts","\nimport { FieryVue, FieryOptions, FieryEntry, FieryData, FierySource } from './types'\nimport { getMetadata, forEach } from './util'\n\n\n\nexport function update (this: FieryVue, data: FieryData, fields?: string[]): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    const values: FieryData = getValues(data, options, fields)\n\n    return store.doc(path).update(values)\n  }\n}\n\nexport function sync (this: FieryVue, data: FieryData, fields?: string[]): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    const values = getValues(data, options, fields)\n\n    return store.doc(path).set(values)\n  }\n}\n\nexport function removeÂ (this: FieryVue, data: FieryData, excludeSubs: boolean = false): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    if (!excludeSubs && options.sub)\n    {\n      for (let subProp in options.sub)\n      {\n        forEach(data[subProp], (sub) =>\n        {\n          this.remove(sub as FieryData)\n        })\n      }\n    }\n\n    return store.doc(path).delete()\n  }\n}\n\nexport function clear (this: FieryVue, data: FieryData, props: string | string[]): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n  const propsArray: string[] = props instanceof Array ? props : [props]\n\n  if (store && path)\n  {\n    const doc = store.doc(path)\n    const deleting: any = {}\n    let deleteCount: number = 0\n\n    for (let prop of propsArray)\n    {\n      if (options.sub && prop in options.sub && data[prop])\n      {\n        forEach(data[prop], (sub) =>\n        {\n          this.remove(sub as FieryData)\n        })\n      }\n      else if (prop in data)\n      {\n        let firebaseRuntime: any = (<any>store.app).firebase_\n\n        if (firebaseRuntime)\n        {\n          deleting[prop] = firebaseRuntime.firestore.FieldValue.delete()\n          deleteCount++\n        }\n      }\n    }\n\n    if (deleteCount > 0)\n    {\n      return doc.update(deleting)\n    }\n  }\n}\n\nexport function ref (this: FieryVue, data: FieryData, sub?: string): FierySource | undefined\n{\n  const { store, path } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    let doc = store.doc(path)\n\n    return sub ? doc.collection(sub) : doc\n  }\n}\n\nexport function getValues (data: FieryData, options: FieryOptions, fields?: string[]): FieryData\n{\n  const explicit: string[] = fields || options.include\n  const values: FieryData = {}\n\n  if (explicit)\n  {\n    for (let i = 0; i < explicit.length; i++)\n    {\n      let prop: string = explicit[i]\n\n      if (prop in data)\n      {\n        values[prop] = data[prop]\n      }\n    }\n  }\n  else\n  {\n    for (let prop in data)\n    {\n      if (!(prop in options.exclude))\n      {\n        values[prop] = data[prop]\n      }\n    }\n  }\n\n  return values\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/operations.ts","\n\nimport { FieryVue, FieryEntry, FieryTarget, FierySource, FieryInstanceFactory, FieryOptions } from '../types'\nimport { getEntry } from '../entry'\n\n\n\nimport factoryDocument from './document'\nimport factoryMap from './map'\nimport factoryCollection from './collection'\n\n\n\nexport function factory (vm: FieryVue, entry: FieryEntry): FieryTarget\n{\n  let chosenFactory = (<any>entry.source).where\n    ? (entry.options.map ? factoryMap : factoryCollection)\n    : factoryDocument\n\n  return chosenFactory(vm, entry)\n}\n\nexport function factoryInstance (vm: FieryVue): FieryInstanceFactory\n{\n  return (source: FierySource, options?: Partial<FieryOptions>): FieryTarget => {\n    return factory(vm, getEntry(vm, source, options))\n  }\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/index.ts","\nimport * as firebase from 'firebase'\n\n\nimport { FieryOptions, FieryEntry, FieryData, FieryVue } from '../types'\nimport { refreshDocument } from '../documents'\n\n\n\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype DocumentChange = firebase.firestore.DocumentChange\ntype DocumentReference = firebase.firestore.DocumentReference\ntype DocumentListenOptions = firebase.firestore.DocumentListenOptions\n\n\n\nexport function factory (vm: FieryVue, entry: FieryEntry): FieryData\n{\n  const source: DocumentReference = entry.source as DocumentReference\n  const options: FieryOptions = entry.options\n\n  if (options.once)\n  {\n    entry.promise = source.get(options.onceOptions)\n      .then((doc: DocumentSnapshot) =>\n      {\n        handleDocumentUpdate(vm, entry, doc)\n\n      }).catch(options.onError)\n  }\n  else\n  {\n    entry.off = source.onSnapshot(options.liveOptions as DocumentListenOptions,\n      (doc: DocumentSnapshot) =>\n      {\n        handleDocumentUpdate(vm, entry, doc)\n\n      }, options.onError)\n  }\n\n  return entry.target as FieryData\n}\n\nexport function handleDocumentUpdate (vm: FieryVue, entry: FieryEntry, doc: DocumentSnapshot): void\n{\n  const options: FieryOptions = entry.options\n\n  if (!doc.exists)\n  {\n    options.onMissing()\n  }\n  else\n  {\n    entry.target = refreshDocument(vm, entry, doc, entry.target)\n\n    if (options.reset && options.property)\n    {\n      vm[options.property] = entry.target\n    }\n\n    options.onSuccess(entry.target)\n  }\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/document.ts","\nimport * as firebase from 'firebase'\n\n\n\nimport { PROP_UID, UID_SEPARATOR, STORE_SEPARATOR, ENTRY_SEPARATOR } from './constants'\nimport { FieryOptions, FieryInstance, FieryEntry, FieryData, FieryMap, FieryVue } from './types'\nimport { isObject, forEach, getMetadata, createRecord } from './util'\nimport { closeEntry, getEntry } from './entry'\nimport { factory } from './factory'\n\n\n\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype Firestore = firebase.firestore.Firestore\n\n\n\nexport function parseDocument (doc: DocumentSnapshot, options: FieryOptions): FieryData\n{\n  let value = doc.data()\n  let out = (isObject(value) ? value : { [options.propValue]: value }) as FieryData\n\n  if (out && options.key)\n  {\n    out[options.key] = doc.id\n  }\n\n  return out\n}\n\nexport function refreshDocument (vm: FieryVue, entry: FieryEntry, doc: DocumentSnapshot, data?: FieryData): FieryData\n{\n  const options: FieryOptions = entry.options\n  const property: string | undefined = options.property\n  const replace: boolean = !!(options.reset && property)\n  const encoded: FieryData = parseDocument(doc, options)\n\n  if (!data)\n  {\n    const identifier: string = getDocumentIdentifier(vm, options, doc)\n\n    data = options.newDocument(encoded)\n\n    data[PROP_UID] = identifier\n\n    copyData(vm, data, encoded)\n    createRecord(data, options)\n\n    if (options.sub)\n    {\n      for (let subProp in options.sub)\n      {\n        let subOptions: FieryOptions = options.sub[subProp]\n        let subEntryKey: string = doc.ref.path + ENTRY_SEPARATOR + subProp\n        let subEntry: FieryEntry = getEntry(vm, doc.ref.collection(subProp), subOptions, subEntryKey, true)\n\n        data[subProp] = factory(vm, subEntry)\n      }\n    }\n  }\n  else if (replace)\n  {\n    const replaced: FieryData = options.newDocument(encoded)\n\n    if (options.sub)\n    {\n      for (let subProp in options.sub)\n      {\n        if (data[subProp])\n        {\n          replaced[subProp] = data[subProp]\n        }\n      }\n    }\n\n    createRecord(replaced, options)\n\n    data = copyData(vm, replaced, encoded)\n  }\n  else\n  {\n    copyData(vm, data, encoded)\n  }\n\n  return data\n}\n\nexport function copyData (vm: FieryVue, data: FieryData, update: FieryData): FieryData\n{\n  for (let prop in update)\n  {\n    vm.$set(data, prop, update[prop])\n  }\n\n  return data\n}\n\nexport function destroyDocuments (vm: FieryVue, map: FieryMap, fromObject?: FieryMap): void\n{\n  for (let id in map)\n  {\n    const old: FieryData = map[id]\n\n    destroyDocument(vm, old)\n\n    if (fromObject)\n    {\n      vm.$delete(fromObject, id)\n    }\n  }\n}\n\nexport function destroyDocument (vm: FieryVue, data: FieryData): void\n{\n  let { path, options } = getMetadata(vm, data)\n\n  if (options.sub)\n  {\n    const fiery: FieryInstance = vm.$fiery\n\n    for (let subProp in options.sub)\n    {\n      let subEntryKey: string = path + ENTRY_SEPARATOR + subProp\n      let subEntry: FieryEntry = fiery.entry[ subEntryKey ]\n\n      if (subEntry)\n      {\n        closeEntry(subEntry)\n\n        delete fiery.entry[ subEntryKey ]\n\n        if (typeof subEntry.index === 'number')\n        {\n          fiery.entryList[subEntry.index] = null\n\n          delete subEntry.index\n        }\n      }\n\n      forEach(data[subProp], (value) =>\n      {\n        destroyDocument(vm, value)\n      })\n    }\n  }\n}\n\nexport function getDocumentIdentifier (vm: FieryVue, options: FieryOptions, doc: DocumentSnapshot)\n{\n  return getStoreKey(vm, doc) +\n    UID_SEPARATOR +\n    options.id +\n    UID_SEPARATOR +\n    doc.ref.path\n}\n\nexport function getStoreKey (vm: FieryVue, doc: DocumentSnapshot): number\n{\n  const firestore = (<any>doc)._firestore\n  const db = firestore._databaseId\n  const id: string = db.database + STORE_SEPARATOR + db.projectId\n\n  const fiery: FieryInstance = vm.$fiery\n  let key: number = fiery.storeIdToKey[id]\n\n  if (!key)\n  {\n    key = ++fiery.storeKeyNext\n    fiery.stores[key] = firestore\n    fiery.storeIdToKey[id] = key\n  }\n\n  return key\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/documents.ts","\nimport * as firebase from 'firebase'\n\n\n\nimport { PROP_UID } from '../constants'\nimport { FieryVue, FieryEntry, FieryTarget, FieryData, FieryOptions, FieryMap } from '../types'\nimport { refreshDocument, destroyDocuments, destroyDocument } from '../documents'\n\n\n\ntype Query = firebase.firestore.Query\ntype QuerySnapshot = firebase.firestore.QuerySnapshot\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype DocumentChange = firebase.firestore.DocumentChange\ntype CollectionReference = firebase.firestore.CollectionReference\ntype QueryListenOptions = firebase.firestore.QueryListenOptions\n\n\n\nfunction factory (vm: FieryVue, entry: FieryEntry): FieryMap\n{\n  type CollectionQuery = CollectionReference | Query\n  const options: FieryOptions = entry.options\n  const query: CollectionQuery = (options.query ? options.query(entry.source) : entry.source) as CollectionQuery\n\n  if (options.once)\n  {\n    entry.promise = query.get(options.onceOptions)\n      .then((querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryMap = entry.target as FieryMap\n\n        let missing: FieryMap = {}\n        for (let id in target) {\n          missing[id] = target[id]\n        }\n\n        querySnapshot.forEach((doc: DocumentSnapshot) =>\n        {\n          const old: FieryData = target[doc.id]\n          const updated: FieryData = refreshDocument(vm, entry, doc, old)\n\n          vm.$set(target, doc.id, updated)\n          delete missing[doc.id]\n\n        }, options.onError)\n\n        destroyDocuments(vm, missing, target)\n\n        options.onSuccess(target)\n\n      }).catch(options.onError)\n  }\n  else\n  {\n    entry.off = query.onSnapshot(options.liveOptions as QueryListenOptions,\n      (querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryMap = entry.target as FieryMap\n\n        (<any>querySnapshot).docChanges().forEach((change: DocumentChange) =>\n        {\n          const doc: DocumentSnapshot = change.doc\n\n          switch (change.type) {\n            case 'modified':\n            case 'added':\n              const old: FieryData = target[doc.id]\n              const updated: FieryData = refreshDocument(vm, entry, doc, old)\n              vm.$set(target, doc.id, updated)\n              break\n            case 'removed':\n              destroyDocument(vm, target[doc.id])\n              vm.$delete(target, doc.id)\n              break\n          }\n        }, options.onError)\n\n        options.onSuccess(target)\n\n      }, options.onError)\n  }\n\n  return entry.target as FieryMap\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/map.ts","\nimport * as firebase from 'firebase'\n\n\nimport { PROP_UID } from '../constants'\nimport { FieryVue, FieryEntry, FieryTarget, FieryData, FieryOptions, FieryMap } from '../types'\nimport { refreshDocument, destroyDocuments } from '../documents'\n\n\n\ntype Query = firebase.firestore.Query\ntype QuerySnapshot = firebase.firestore.QuerySnapshot\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype DocumentChange = firebase.firestore.DocumentChange\ntype CollectionReference = firebase.firestore.CollectionReference\ntype QueryListenOptions = firebase.firestore.QueryListenOptions\n\n\n\nexport function factory (vm: FieryVue, entry: FieryEntry): FieryData[]\n{\n  type CollectionQuery = CollectionReference | Query\n  const options: FieryOptions = entry.options\n  const query: CollectionQuery = (options.query ? options.query(entry.source) : entry.source) as CollectionQuery\n\n  if (options.once)\n  {\n    entry.promise = query.get(options.onceOptions)\n      .then((querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryData[] = entry.target as FieryData[]\n\n        const missing: FieryMap = {}\n\n        for (let i = 0; i < target.length; i++)\n        {\n          const old: FieryData = target[i]\n          missing[old[PROP_UID]] = old\n        }\n\n        target.splice(0, target.length);\n\n        querySnapshot.forEach((doc: DocumentSnapshot) =>\n        {\n          const old = missing[doc.id]\n          const updated = refreshDocument(vm, entry, doc, old)\n\n          target.push(updated)\n          delete missing[updated[PROP_UID]]\n\n        }, options.onError)\n\n        destroyDocuments(vm, missing)\n\n        options.onSuccess(target)\n\n      }).catch(options.onError)\n  }\n  else\n  {\n    entry.off = query.onSnapshot(options.liveOptions as QueryListenOptions,\n      (querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryData[] = entry.target as FieryData[]\n\n        (<any>querySnapshot).docChanges().forEach((change: DocumentChange) =>\n        {\n          const doc: DocumentSnapshot = change.doc\n\n          switch (change.type) {\n            case 'added':\n              const created: FieryData = refreshDocument(vm, entry, doc)\n              target.splice(change.newIndex, 0, created)\n              break\n            case 'removed':\n              target.splice(change.oldIndex, 1)\n              break\n            case 'modified':\n              const old: FieryData = target[change.oldIndex]\n              const updated: FieryData = refreshDocument(vm, entry, doc, old)\n\n              if (change.oldIndex !== change.newIndex) {\n                target.splice(change.oldIndex, 1)\n                target.splice(change.newIndex, 0, updated)\n              } else {\n                target.splice(change.newIndex, 1, updated)\n              }\n              break\n          }\n        }, options.onError)\n\n        options.onSuccess(target)\n\n      }, options.onError)\n  }\n\n  return entry.target as FieryData[]\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/collection.ts"],"sourceRoot":""}