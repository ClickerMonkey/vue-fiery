{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-fiery.js","webpack:///webpack/bootstrap 86c93589198856935ad8","webpack:///./src/index.ts","webpack:///./src/plugin.ts","webpack:///./src/mixin.ts","webpack:///./src/util.ts","webpack:///./src/constants.ts","webpack:///./src/entry.ts","webpack:///./src/options.ts","webpack:///./src/operations.ts","webpack:///./src/factory/index.ts","webpack:///./src/factory/document.ts","webpack:///./src/documents.ts","webpack:///./src/factory/map.ts","webpack:///./src/factory/collection.ts"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","plugin_1","default","install","Vue","mixin","beforeCreate","mixin_1","init","created","link","beforeDestroy","destroy","window","use","_this","$fiery","factory_1","factoryInstance","stores","storeKeyNext","storeIdToKey","options","optionKeyNext","entry","entryList","update","operations","bind","sync","remove","ref","getMetadata","data","util_1","$fires","forEach","entry_1","closeEntry","i","length","parent","property","prop","target","source","isObject","x","prototype","toString","isFunction","isArray","Array","isCollectionSource","iterable","callback","vm","uid","constants_1","PROP_UID","_a","split","UID_SEPARATOR","storeKey","optionKey","path","store","parseInt","createRecord","record","recordOptions","recordFunctions","PROP_VALUE","ENTRY_SEPARATOR","STORE_SEPARATOR","RECORD_OPTIONS","off","getEntry","optionsInput","entryKeyInput","useRawOptions","options_1","normalizeOptions","entryKey","fiery","fires","newCollection","newDocument","existing","children","index","push","onError","message","onMissing","onSuccess","results","onRemove","liveOptions","propValue","fields","excludeSubs","sub","type","typeConstructor_1","encoded","map","exclude","excludeArray","key","excludeMap","recordOperation","subProp","subOptions","values","getValues","doc","set","delete","collection","explicit","include","chosenFactory","where","map_1","collection_1","document_1","once","promise","get","onceOptions","then","handleDocumentUpdate","catch","onSnapshot","exists","documents_1","refreshDocument","reset","parseDocument","out","replace","replaced","copyData","identifier","getDocumentIdentifier","subEntryKey","subEntry","$set","destroyDocuments","fromObject","old","destroyDocument","$delete","getStoreKey","firestore","_firestore","db","_databaseId","database","projectId","query","querySnapshot","missing","updated","docChanges","change","splice","newIndex","oldIndex"],"mappings":"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","file":"vue-fiery.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueFiery\"] = factory();\n\telse\n\t\troot[\"VueFiery\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueFiery\"] = factory();\n\telse\n\t\troot[\"VueFiery\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar plugin_1 = __webpack_require__(1);\n\texports.default = plugin_1.default;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar mixin_1 = __webpack_require__(2);\n\tfunction install(Vue) {\n\t    Vue.mixin({\n\t        beforeCreate: mixin_1.init,\n\t        created: mixin_1.link,\n\t        beforeDestroy: mixin_1.destroy\n\t    });\n\t}\n\texports.install = install;\n\tif (typeof window !== 'undefined' && window.Vue) {\n\t    window.Vue.use(install);\n\t}\n\texports.default = install;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar util_1 = __webpack_require__(3);\n\tvar entry_1 = __webpack_require__(5);\n\tvar operations = __webpack_require__(7);\n\tvar factory_1 = __webpack_require__(8);\n\tfunction init() {\n\t    var _this = this;\n\t    this.$fiery = factory_1.factoryInstance(this);\n\t    this.$fiery.stores = {};\n\t    this.$fiery.storeKeyNext = 0;\n\t    this.$fiery.storeIdToKey = {};\n\t    this.$fiery.options = {};\n\t    this.$fiery.optionKeyNext = 0;\n\t    this.$fiery.entry = {};\n\t    this.$fiery.entryList = [];\n\t    this.$fiery.update = operations.update.bind(this);\n\t    this.$fiery.sync = operations.sync.bind(this);\n\t    this.$fiery.remove = operations.remove.bind(this);\n\t    this.$fiery.ref = operations.ref.bind(this);\n\t    this.$fiery.link = link.bind(this);\n\t    this.$fiery.destroy = destroy.bind(this);\n\t    this.$fiery.getMetadata = function (data) { return util_1.getMetadata(_this, data); };\n\t    this.$fires = {};\n\t}\n\texports.init = init;\n\tfunction destroy() {\n\t    this.$fiery.stores = {};\n\t    this.$fiery.entry = {};\n\t    this.$fiery.entryList.forEach(entry_1.closeEntry);\n\t    this.$fiery.entryList = [];\n\t    this.$fiery = (function () { });\n\t    this.$fires = {};\n\t}\n\texports.destroy = destroy;\n\tfunction link() {\n\t    var entryList = this.$fiery.entryList;\n\t    for (var i = 0; i < entryList.length; i++) {\n\t        var entry = entryList[i];\n\t        if (entry === null) {\n\t            continue;\n\t        }\n\t        var options = entry.options;\n\t        if (!options.parent && !options.property) {\n\t            for (var prop in this) {\n\t                if (this[prop] === entry.target) {\n\t                    options.property = prop;\n\t                    this.$fiery.entry[prop] = entry;\n\t                    this.$fires[prop] = entry.source;\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t    }\n\t}\n\texports.link = link;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tfunction isObject(x) {\n\t    return Object.prototype.toString.call(x) === '[object Object]';\n\t}\n\texports.isObject = isObject;\n\tfunction isFunction(x) {\n\t    return typeof x === 'function';\n\t}\n\texports.isFunction = isFunction;\n\tfunction isArray(x) {\n\t    return x && x instanceof Array;\n\t}\n\texports.isArray = isArray;\n\tfunction isCollectionSource(source) {\n\t    return !!(source.where);\n\t}\n\texports.isCollectionSource = isCollectionSource;\n\tfunction forEach(iterable, callback) {\n\t    if (isArray(iterable)) {\n\t        for (var i = 0; i < iterable.length; i++) {\n\t            callback(iterable[i], i, iterable);\n\t        }\n\t        return true;\n\t    }\n\t    else if (isObject(iterable)) {\n\t        for (var prop in iterable) {\n\t            callback(iterable[prop], prop, iterable);\n\t        }\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\texports.forEach = forEach;\n\tfunction getMetadata(vm, data) {\n\t    var uid = data[constants_1.PROP_UID];\n\t    var _a = uid.split(constants_1.UID_SEPARATOR), storeKey = _a[0], optionKey = _a[1], path = _a[2];\n\t    var store = vm.$fiery.stores[parseInt(storeKey)];\n\t    var options = vm.$fiery.options[parseInt(optionKey)];\n\t    return { uid: uid, path: path, storeKey: storeKey, store: store, optionKey: optionKey, options: options };\n\t}\n\texports.getMetadata = getMetadata;\n\tfunction createRecord(data, options) {\n\t    if (options.record) {\n\t        var recordOptions = options.recordOptions;\n\t        var recordFunctions = options.recordFunctions;\n\t        if (recordOptions.sync)\n\t            data[recordOptions.sync] = recordFunctions.sync;\n\t        if (recordOptions.update)\n\t            data[recordOptions.update] = recordFunctions.update;\n\t        if (recordOptions.remove)\n\t            data[recordOptions.remove] = recordFunctions.remove;\n\t        if (recordOptions.ref)\n\t            data[recordOptions.ref] = recordFunctions.ref;\n\t    }\n\t    return data;\n\t}\n\texports.createRecord = createRecord;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.PROP_VALUE = '.value';\n\texports.PROP_UID = '.uid';\n\texports.UID_SEPARATOR = '///';\n\texports.ENTRY_SEPARATOR = '/';\n\texports.STORE_SEPARATOR = '/';\n\texports.RECORD_OPTIONS = {\n\t    sync: '$sync',\n\t    update: '$update',\n\t    remove: '$remove',\n\t    ref: '$ref'\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar util_1 = __webpack_require__(3);\n\tvar options_1 = __webpack_require__(6);\n\tfunction closeEntry(entry) {\n\t    if (entry && entry.off) {\n\t        entry.off();\n\t        delete entry.off;\n\t    }\n\t}\n\texports.closeEntry = closeEntry;\n\tfunction getEntry(vm, source, optionsInput, entryKeyInput, useRawOptions) {\n\t    if (useRawOptions === void 0) { useRawOptions = false; }\n\t    var options = useRawOptions\n\t        ? optionsInput\n\t        : options_1.normalizeOptions(vm, optionsInput, source);\n\t    var property = options.property;\n\t    var entryKey = entryKeyInput || property || '';\n\t    var fiery = vm.$fiery;\n\t    var fires = vm.$fires;\n\t    var target = util_1.isCollectionSource(source) ? options.newCollection() : options.newDocument();\n\t    var existing = fiery.entry[entryKey];\n\t    var children = {};\n\t    var entry = { source: source, options: options, target: target, children: children };\n\t    if (existing) {\n\t        closeEntry(existing);\n\t        entry.target = existing.target;\n\t    }\n\t    if (!entryKey || !(entryKey in fiery.entry)) {\n\t        entry.index = fiery.entryList.length;\n\t        fiery.entryList.push(entry);\n\t    }\n\t    if (entryKey) {\n\t        fiery.entry[entryKey] = entry;\n\t    }\n\t    if (property) {\n\t        fires[property] = source;\n\t    }\n\t    return entry;\n\t}\n\texports.getEntry = getEntry;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tvar util_1 = __webpack_require__(3);\n\tvar operations = __webpack_require__(7);\n\tfunction normalizeOptions(vm, options, source) {\n\t    if (!options || !util_1.isObject(options)) {\n\t        options = {};\n\t    }\n\t    if (!util_1.isFunction(options.onError)) {\n\t        options.onError = function (message) { };\n\t    }\n\t    if (!util_1.isFunction(options.onMissing)) {\n\t        options.onMissing = function () { };\n\t    }\n\t    if (!util_1.isFunction(options.onSuccess)) {\n\t        options.onSuccess = function (results) { };\n\t    }\n\t    if (!util_1.isFunction(options.onRemove)) {\n\t        options.onRemove = function () { };\n\t    }\n\t    if (!options.liveOptions) {\n\t        options.liveOptions = {};\n\t    }\n\t    if (!options.propValue) {\n\t        options.propValue = constants_1.PROP_VALUE;\n\t    }\n\t    if (!options.recordOptions) {\n\t        options.recordOptions = constants_1.RECORD_OPTIONS;\n\t    }\n\t    if (options.record) {\n\t        options.recordFunctions = {\n\t            sync: function (fields) {\n\t                return operations.sync.call(vm, this, fields);\n\t            },\n\t            update: function (fields) {\n\t                return operations.update.call(vm, this, fields);\n\t            },\n\t            remove: function (excludeSubs) {\n\t                if (excludeSubs === void 0) { excludeSubs = false; }\n\t                return operations.remove.call(vm, this, excludeSubs);\n\t            },\n\t            ref: function (sub) {\n\t                return operations.ref.call(vm, this, sub);\n\t            }\n\t        };\n\t    }\n\t    if (options.type) {\n\t        var typeConstructor_1 = options.type;\n\t        options.newDocument = function (encoded) { return new typeConstructor_1(); };\n\t    }\n\t    else if (!options.newDocument) {\n\t        options.newDocument = function (encoded) { return ({}); };\n\t    }\n\t    if (!options.newCollection) {\n\t        options.newCollection = options.map\n\t            ? function () { return ({}); }\n\t            : function () { return []; };\n\t    }\n\t    if (!options.exclude) {\n\t        options.exclude = {};\n\t        if (options.key) {\n\t            options.exclude[options.key] = true;\n\t        }\n\t    }\n\t    else if (util_1.isArray(options.exclude)) {\n\t        var excludeArray = options.exclude;\n\t        options.exclude = {};\n\t        for (var i = 0; i < excludeArray.length; i++) {\n\t            options.exclude[excludeArray[i]] = true;\n\t        }\n\t    }\n\t    var excludeMap = options.exclude;\n\t    excludeMap[options.propValue] = true;\n\t    excludeMap[constants_1.PROP_UID] = true;\n\t    for (var recordOperation in options.recordOptions) {\n\t        excludeMap[options.recordOptions[recordOperation]] = true;\n\t    }\n\t    if (options.sub) {\n\t        for (var subProp in options.sub) {\n\t            var subOptions = normalizeOptions(vm, options.sub[subProp]);\n\t            subOptions.property = subProp;\n\t            subOptions.parent = options;\n\t            options.sub[subProp] = subOptions;\n\t            excludeMap[subProp] = true;\n\t        }\n\t    }\n\t    if (!options.id) {\n\t        var fiery = vm.$fiery;\n\t        options.id = ++fiery.optionKeyNext;\n\t        fiery.options[options.id] = options;\n\t    }\n\t    return options;\n\t}\n\texports.normalizeOptions = normalizeOptions;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar util_1 = __webpack_require__(3);\n\tfunction update(data, fields) {\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    if (store && path) {\n\t        var values = getValues(data, options, fields);\n\t        return store.doc(path).update(values);\n\t    }\n\t}\n\texports.update = update;\n\tfunction sync(data, fields) {\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    if (store && path) {\n\t        var values = getValues(data, options, fields);\n\t        return store.doc(path).set(values);\n\t    }\n\t}\n\texports.sync = sync;\n\tfunction remove(data, excludeSubs) {\n\t    var _this = this;\n\t    if (excludeSubs === void 0) { excludeSubs = false; }\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path, options = _a.options;\n\t    if (store && path) {\n\t        if (!excludeSubs && options.sub) {\n\t            for (var subProp in options.sub) {\n\t                util_1.forEach(data[subProp], function (sub) {\n\t                    _this.remove(sub);\n\t                });\n\t            }\n\t        }\n\t        return store.doc(path).delete();\n\t    }\n\t}\n\texports.remove = remove;\n\tfunction ref(data, sub) {\n\t    var _a = util_1.getMetadata(this, data), store = _a.store, path = _a.path;\n\t    if (store && path) {\n\t        var doc = store.doc(path);\n\t        return sub ? doc.collection(sub) : doc;\n\t    }\n\t}\n\texports.ref = ref;\n\tfunction getValues(data, options, fields) {\n\t    var explicit = fields || options.include;\n\t    var values = {};\n\t    if (explicit) {\n\t        for (var i = 0; i < explicit.length; i++) {\n\t            var prop = explicit[i];\n\t            if (prop in data) {\n\t                values[prop] = data[prop];\n\t            }\n\t        }\n\t    }\n\t    else {\n\t        for (var prop in data) {\n\t            if (!(prop in options.exclude)) {\n\t                values[prop] = data[prop];\n\t            }\n\t        }\n\t    }\n\t    return values;\n\t}\n\texports.getValues = getValues;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar entry_1 = __webpack_require__(5);\n\tvar document_1 = __webpack_require__(9);\n\tvar map_1 = __webpack_require__(11);\n\tvar collection_1 = __webpack_require__(12);\n\tfunction factory(vm, entry) {\n\t    var chosenFactory = entry.source.where\n\t        ? (entry.options.map ? map_1.default : collection_1.default)\n\t        : document_1.default;\n\t    return chosenFactory(vm, entry);\n\t}\n\texports.factory = factory;\n\tfunction factoryInstance(vm) {\n\t    return function (source, options) {\n\t        return factory(vm, entry_1.getEntry(vm, source, options));\n\t    };\n\t}\n\texports.factoryInstance = factoryInstance;\n\texports.default = factory;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar documents_1 = __webpack_require__(10);\n\tfunction factory(vm, entry) {\n\t    var source = entry.source;\n\t    var options = entry.options;\n\t    if (options.once) {\n\t        entry.promise = source.get(options.onceOptions)\n\t            .then(function (doc) {\n\t            handleDocumentUpdate(vm, entry, doc);\n\t        }).catch(options.onError);\n\t    }\n\t    else {\n\t        entry.off = source.onSnapshot(options.liveOptions, function (doc) {\n\t            handleDocumentUpdate(vm, entry, doc);\n\t        }, options.onError);\n\t    }\n\t    return entry.target;\n\t}\n\texports.factory = factory;\n\tfunction handleDocumentUpdate(vm, entry, doc) {\n\t    var options = entry.options;\n\t    if (!doc.exists) {\n\t        options.onMissing();\n\t    }\n\t    else {\n\t        entry.target = documents_1.refreshDocument(vm, entry, doc, entry.target);\n\t        if (options.reset && options.property) {\n\t            vm[options.property] = entry.target;\n\t        }\n\t        options.onSuccess(entry.target);\n\t    }\n\t}\n\texports.handleDocumentUpdate = handleDocumentUpdate;\n\texports.default = factory;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tvar util_1 = __webpack_require__(3);\n\tvar entry_1 = __webpack_require__(5);\n\tvar factory_1 = __webpack_require__(8);\n\tfunction parseDocument(doc, options) {\n\t    var _a;\n\t    var value = doc.data();\n\t    var out = (util_1.isObject(value) ? value : (_a = {}, _a[options.propValue] = value, _a));\n\t    if (out && options.key) {\n\t        out[options.key] = doc.id;\n\t    }\n\t    return out;\n\t}\n\texports.parseDocument = parseDocument;\n\tfunction refreshDocument(vm, entry, doc, data) {\n\t    var options = entry.options;\n\t    var property = options.property;\n\t    var replace = !!(options.reset && property);\n\t    var encoded = parseDocument(doc, options);\n\t    if (!data) {\n\t        var identifier = getDocumentIdentifier(vm, options, doc);\n\t        data = options.newDocument(encoded);\n\t        data[constants_1.PROP_UID] = identifier;\n\t        copyData(vm, data, encoded);\n\t        util_1.createRecord(data, options);\n\t        if (options.sub) {\n\t            for (var subProp in options.sub) {\n\t                var subOptions = options.sub[subProp];\n\t                var subEntryKey = doc.ref.path + constants_1.ENTRY_SEPARATOR + subProp;\n\t                var subEntry = entry_1.getEntry(vm, doc.ref.collection(subProp), subOptions, subEntryKey, true);\n\t                data[subProp] = factory_1.factory(vm, subEntry);\n\t            }\n\t        }\n\t    }\n\t    else if (replace) {\n\t        var replaced = options.newDocument(encoded);\n\t        if (options.sub) {\n\t            for (var subProp in options.sub) {\n\t                if (data[subProp]) {\n\t                    replaced[subProp] = data[subProp];\n\t                }\n\t            }\n\t        }\n\t        util_1.createRecord(replaced, options);\n\t        data = copyData(vm, replaced, encoded);\n\t    }\n\t    else {\n\t        copyData(vm, data, encoded);\n\t    }\n\t    return data;\n\t}\n\texports.refreshDocument = refreshDocument;\n\tfunction copyData(vm, data, update) {\n\t    for (var prop in update) {\n\t        vm.$set(data, prop, update[prop]);\n\t    }\n\t    return data;\n\t}\n\texports.copyData = copyData;\n\tfunction destroyDocuments(vm, map, fromObject) {\n\t    for (var id in map) {\n\t        var old = map[id];\n\t        destroyDocument(vm, old);\n\t        if (fromObject) {\n\t            vm.$delete(fromObject, id);\n\t        }\n\t    }\n\t}\n\texports.destroyDocuments = destroyDocuments;\n\tfunction destroyDocument(vm, data) {\n\t    var _a = util_1.getMetadata(vm, data), path = _a.path, options = _a.options;\n\t    if (options.sub) {\n\t        var fiery = vm.$fiery;\n\t        for (var subProp in options.sub) {\n\t            var subEntryKey = path + constants_1.ENTRY_SEPARATOR + subProp;\n\t            var subEntry = fiery.entry[subEntryKey];\n\t            if (subEntry) {\n\t                entry_1.closeEntry(subEntry);\n\t                delete fiery.entry[subEntryKey];\n\t                if (typeof subEntry.index === 'number') {\n\t                    fiery.entryList[subEntry.index] = null;\n\t                    delete subEntry.index;\n\t                }\n\t            }\n\t            util_1.forEach(data[subProp], function (value) {\n\t                destroyDocument(vm, value);\n\t            });\n\t        }\n\t    }\n\t}\n\texports.destroyDocument = destroyDocument;\n\tfunction getDocumentIdentifier(vm, options, doc) {\n\t    return getStoreKey(vm, doc) +\n\t        constants_1.UID_SEPARATOR +\n\t        options.id +\n\t        constants_1.UID_SEPARATOR +\n\t        doc.ref.path;\n\t}\n\texports.getDocumentIdentifier = getDocumentIdentifier;\n\tfunction getStoreKey(vm, doc) {\n\t    var firestore = doc._firestore;\n\t    var db = firestore._databaseId;\n\t    var id = db.database + constants_1.STORE_SEPARATOR + db.projectId;\n\t    var fiery = vm.$fiery;\n\t    var key = fiery.storeIdToKey[id];\n\t    if (!key) {\n\t        key = ++fiery.storeKeyNext;\n\t        fiery.stores[key] = firestore;\n\t        fiery.storeIdToKey[id] = key;\n\t    }\n\t    return key;\n\t}\n\texports.getStoreKey = getStoreKey;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar documents_1 = __webpack_require__(10);\n\tfunction factory(vm, entry) {\n\t    var options = entry.options;\n\t    var query = (options.query ? options.query(entry.source) : entry.source);\n\t    if (options.once) {\n\t        entry.promise = query.get(options.onceOptions)\n\t            .then(function (querySnapshot) {\n\t            var target = entry.target;\n\t            var missing = {};\n\t            for (var id in target) {\n\t                missing[id] = target[id];\n\t            }\n\t            querySnapshot.forEach(function (doc) {\n\t                var old = target[doc.id];\n\t                var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                vm.$set(target, doc.id, updated);\n\t                delete missing[doc.id];\n\t            }, options.onError);\n\t            documents_1.destroyDocuments(vm, missing, target);\n\t            options.onSuccess(target);\n\t        }).catch(options.onError);\n\t    }\n\t    else {\n\t        entry.off = query.onSnapshot(options.liveOptions, function (querySnapshot) {\n\t            var target = entry.target;\n\t            querySnapshot.docChanges().forEach(function (change) {\n\t                var doc = change.doc;\n\t                switch (change.type) {\n\t                    case 'modified':\n\t                    case 'added':\n\t                        var old = target[doc.id];\n\t                        var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                        vm.$set(target, doc.id, updated);\n\t                        break;\n\t                    case 'removed':\n\t                        documents_1.destroyDocument(vm, target[doc.id]);\n\t                        vm.$delete(target, doc.id);\n\t                        break;\n\t                }\n\t            }, options.onError);\n\t            options.onSuccess(target);\n\t        }, options.onError);\n\t    }\n\t    return entry.target;\n\t}\n\texports.default = factory;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar constants_1 = __webpack_require__(4);\n\tvar documents_1 = __webpack_require__(10);\n\tfunction factory(vm, entry) {\n\t    var options = entry.options;\n\t    var query = (options.query ? options.query(entry.source) : entry.source);\n\t    if (options.once) {\n\t        entry.promise = query.get(options.onceOptions)\n\t            .then(function (querySnapshot) {\n\t            var target = entry.target;\n\t            var missing = {};\n\t            for (var i = 0; i < target.length; i++) {\n\t                var old = target[i];\n\t                missing[old[constants_1.PROP_UID]] = old;\n\t            }\n\t            target.splice(0, target.length);\n\t            querySnapshot.forEach(function (doc) {\n\t                var old = missing[doc.id];\n\t                var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                target.push(updated);\n\t                delete missing[updated[constants_1.PROP_UID]];\n\t            }, options.onError);\n\t            documents_1.destroyDocuments(vm, missing);\n\t            options.onSuccess(target);\n\t        }).catch(options.onError);\n\t    }\n\t    else {\n\t        entry.off = query.onSnapshot(options.liveOptions, function (querySnapshot) {\n\t            var target = entry.target;\n\t            querySnapshot.docChanges().forEach(function (change) {\n\t                var doc = change.doc;\n\t                switch (change.type) {\n\t                    case 'added':\n\t                        var created = documents_1.refreshDocument(vm, entry, doc);\n\t                        target.splice(change.newIndex, 0, created);\n\t                        break;\n\t                    case 'removed':\n\t                        target.splice(change.oldIndex, 1);\n\t                        break;\n\t                    case 'modified':\n\t                        var old = target[change.oldIndex];\n\t                        var updated = documents_1.refreshDocument(vm, entry, doc, old);\n\t                        if (change.oldIndex !== change.newIndex) {\n\t                            target.splice(change.oldIndex, 1);\n\t                            target.splice(change.newIndex, 0, updated);\n\t                        }\n\t                        else {\n\t                            target.splice(change.newIndex, 1, updated);\n\t                        }\n\t                        break;\n\t                }\n\t            }, options.onError);\n\t            options.onSuccess(target);\n\t        }, options.onError);\n\t    }\n\t    return entry.target;\n\t}\n\texports.factory = factory;\n\texports.default = factory;\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// vue-fiery.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 86c93589198856935ad8","import VueFiery from './plugin'\n\nexport default VueFiery\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","\nimport { init, link, destroy } from './mixin'\n\n\n\nexport function install(Vue: any)\n{\n  Vue.mixin({\n    beforeCreate: init,\n    created: link,\n    beforeDestroy: destroy\n  })\n}\n\nif (typeof window !== 'undefined' && (<any>window).Vue)\n{\n  (<any>window).Vue.use(install)\n}\n\nexport default install\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugin.ts","\n\nimport { FieryVue, FieryInstance, FieryInstanceFactory, FieryTarget, FierySource, FieryOptions, FieryEntry } from './types'\nimport { getMetadata } from './util'\nimport { getEntry, closeEntry } from './entry'\nimport * as operations from './operations'\nimport { factoryInstance } from './factory'\n\n\n\nexport function init(this: FieryVue): void\n{\n  this.$fiery = factoryInstance(this) as FieryInstance\n  this.$fiery.stores = {}\n  this.$fiery.storeKeyNext = 0\n  this.$fiery.storeIdToKey = {}\n  this.$fiery.options = {}\n  this.$fiery.optionKeyNext = 0\n  this.$fiery.entry = {}\n  this.$fiery.entryList = []\n  this.$fiery.update = operations.update.bind(this)\n  this.$fiery.sync = operations.sync.bind(this)\n  this.$fiery.remove = operations.remove.bind(this)\n  this.$fiery.ref = operations.ref.bind(this)\n  this.$fiery.link = link.bind(this)\n  this.$fiery.destroy = destroy.bind(this)\n  this.$fiery.getMetadata = (data) => getMetadata(this, data)\n  this.$fires = {}\n}\n\nexport function destroy(this: FieryVue): void\n{\n  this.$fiery.stores = {}\n  this.$fiery.entry = {}\n  this.$fiery.entryList.forEach(closeEntry)\n  this.$fiery.entryList = []\n  this.$fiery = <any>(() => {}) as FieryInstance\n  this.$fires = {}\n}\n\nexport function link(this: FieryVue): void\n{\n  const entryList: (FieryEntry | null)[] = this.$fiery.entryList\n\n  for (let i = 0; i < entryList.length; i++)\n  {\n    const entry: FieryEntry | null = entryList[i]\n\n    if (entry === null)\n    {\n      continue\n    }\n\n    const options: FieryOptions = entry.options\n\n    if (!options.parent && !options.property)\n    {\n      for (let prop in this)\n      {\n        if (this[prop] === entry.target)\n        {\n          options.property = prop\n\n          this.$fiery.entry[ prop ] = entry\n          this.$fires[ prop ] = entry.source\n\n          break\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mixin.ts","\nimport * as firebase from 'firebase'\n\n\nimport { PROP_UID, UID_SEPARATOR } from './constants'\nimport { FieryOptions, FierySource, FieryVue, FieryData, FieryMetadata } from './types'\n\n\ntype Firestore = firebase.firestore.Firestore\n\n\n\nexport function isObject (x?: any): boolean\n{\n  return Object.prototype.toString.call(x) === '[object Object]'\n}\n\nexport function isFunction (x?: any): boolean\n{\n  return typeof x === 'function'\n}\n\nexport function isArray (x?: any): boolean\n{\n  return x && x instanceof Array\n}\n\nexport function isCollectionSource(source: FierySource): boolean\n{\n  return !!((<any>source).where)\n}\n\nexport function forEach(iterable: any, callback: (item: any, key?: number | string, iterable?: any) => any): boolean\n{\n  if (isArray(iterable))\n  {\n    for (let i = 0; i < iterable.length; i++)\n    {\n      callback(iterable[i], i, iterable)\n    }\n\n    return true\n  }\n  else if (isObject(iterable))\n  {\n    for (let prop in iterable)\n    {\n      callback(iterable[prop], prop, iterable)\n    }\n\n    return true\n  }\n\n  return false\n}\n\nexport function getMetadata(vm: FieryVue, data: FieryData): FieryMetadata\n{\n  const uid: string = data[PROP_UID]\n  const [storeKey, optionKey, path] = uid.split(UID_SEPARATOR) as string[]\n  const store: Firestore = vm.$fiery.stores[parseInt(storeKey)]\n  const options: FieryOptions = vm.$fiery.options[parseInt(optionKey)]\n\n  return { uid, path, storeKey, store, optionKey, options }\n}\n\nexport function createRecord(data: FieryData, options: FieryOptions): FieryData\n{\n  if (options.record)\n  {\n    let recordOptions = options.recordOptions\n    let recordFunctions = options.recordFunctions\n\n    if (recordOptions.sync) data[recordOptions.sync] = recordFunctions.sync\n    if (recordOptions.update) data[recordOptions.update] = recordFunctions.update\n    if (recordOptions.remove) data[recordOptions.remove] = recordFunctions.remove\n    if (recordOptions.ref) data[recordOptions.ref] = recordFunctions.ref\n  }\n\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.ts","\nexport const PROP_VALUE = '.value'\nexport const PROP_UID = '.uid'\nexport const UID_SEPARATOR = '///'\nexport const ENTRY_SEPARATOR = '/'\nexport const STORE_SEPARATOR = '/'\nexport const RECORD_OPTIONS = {\n  sync: '$sync',\n  update: '$update',\n  remove: '$remove',\n  ref: '$ref'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","\n\nimport { isCollectionSource } from './util'\nimport { normalizeOptions } from './options'\nimport { FieryOptions, FieryInstance, FieryTarget, FieryEntry, FierySources, FieryVue, FierySource } from './types'\n\n\nexport function closeEntry(entry: FieryEntry): void\n{\n  if (entry && entry.off)\n  {\n    entry.off()\n\n    delete entry.off\n  }\n}\n\nexport function getEntry(vm: FieryVue, source: FierySource, optionsInput?: Partial<FieryOptions>, entryKeyInput?: string, useRawOptions: boolean = false)\n{\n  const options: FieryOptions = useRawOptions\n    ? optionsInput as FieryOptions\n    : normalizeOptions(vm, optionsInput, source)\n  const property: string | undefined = options.property\n  const entryKey: string = entryKeyInput || property || ''\n  const fiery: FieryInstance = vm.$fiery\n  const fires: FierySources = vm.$fires\n  const target: FieryTarget = isCollectionSource(source) ? options.newCollection() : options.newDocument()\n\n  let existing: FieryEntry | undefined = fiery.entry[ entryKey ]\n  let children = {}\n  let entry: FieryEntry = { source, options, target, children }\n\n  if (existing)\n  {\n    closeEntry(existing)\n\n    entry.target = existing.target\n  }\n\n  if (!entryKey || !(entryKey in fiery.entry))\n  {\n    entry.index = fiery.entryList.length\n\n    fiery.entryList.push(entry)\n  }\n\n  if (entryKey)\n  {\n    fiery.entry[ entryKey ] = entry\n  }\n\n  if (property)\n  {\n    fires[ property ] = source\n  }\n\n  return entry\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry.ts","\n\n\nimport { PROP_UID, PROP_VALUE, RECORD_OPTIONS } from './constants'\nimport { FieryOptions, FieryInstance, FieryVue, FieryExclusions, FierySource, FieryData, FieryMap } from './types'\nimport { isObject, isFunction, isArray } from './util'\nimport * as operations from './operations'\n\n\n\nexport function normalizeOptions(vm: FieryVue, options?: Partial<FieryOptions>, source?: FierySource): FieryOptions\n{\n  if (!options || !isObject(options))\n  {\n    options = {}\n  }\n\n  if (!isFunction(options.onError))\n  {\n    options.onError = (message) => {}\n  }\n\n  if (!isFunction(options.onMissing))\n  {\n    options.onMissing = () => {}\n  }\n\n  if (!isFunction(options.onSuccess))\n  {\n    options.onSuccess = (results) => {}\n  }\n\n  if (!isFunction(options.onRemove))\n  {\n    options.onRemove = () => {}\n  }\n\n  if (!options.liveOptions)\n  {\n    options.liveOptions = {}\n  }\n\n  if (!options.propValue)\n  {\n    options.propValue = PROP_VALUE\n  }\n\n  if (!options.recordOptions)\n  {\n    options.recordOptions = RECORD_OPTIONS\n  }\n\n  if (options.record)\n  {\n    options.recordFunctions = {\n      sync: function(this: FieryData, fields?: string[]) {\n        return operations.sync.call(vm, this, fields)\n      },\n      update: function(this: FieryData, fields?: string[]) {\n        return operations.update.call(vm, this, fields)\n      },\n      remove: function(this: FieryData, excludeSubs: boolean = false) {\n        return operations.remove.call(vm, this, excludeSubs)\n      },\n      ref: function(this: FieryData, sub?: string) {\n        return operations.ref.call(vm, this, sub)\n      }\n    }\n  }\n\n  if (options.type)\n  {\n    let typeConstructor = options.type\n\n    options.newDocument = (encoded?: FieryData) => (new typeConstructor() as FieryData)\n  }\n  else if (!options.newDocument)\n  {\n    options.newDocument = (encoded?: FieryData) => ({} as FieryData)\n  }\n\n  if (!options.newCollection)\n  {\n    options.newCollection = options.map\n      ? () => ({} as FieryMap)\n      : () => ([] as FieryData[])\n  }\n\n  if (!options.exclude)\n  {\n    options.exclude = {}\n\n    if (options.key)\n    {\n      options.exclude[options.key] = true\n    }\n  }\n  else if (isArray(options.exclude))\n  {\n    let excludeArray = options.exclude as string[]\n\n    options.exclude = {}\n\n    for (let i = 0; i < excludeArray.length; i++)\n    {\n      options.exclude[excludeArray[i]] = true\n    }\n  }\n\n  let excludeMap: FieryExclusions = options.exclude as FieryExclusions\n\n  excludeMap[options.propValue] = true\n  excludeMap[PROP_UID] = true\n\n  for (let recordOperation in options.recordOptions)\n  {\n    excludeMap[options.recordOptions[recordOperation]] = true\n  }\n\n  if (options.sub)\n  {\n    for (let subProp in options.sub)\n    {\n      let subOptions = normalizeOptions(vm, options.sub[subProp] as Partial<FieryOptions>)\n\n      subOptions.property = subProp\n      subOptions.parent = options as FieryOptions\n\n      options.sub[subProp] = subOptions\n      excludeMap[subProp] = true\n    }\n  }\n\n  if (!options.id)\n  {\n    const fiery: FieryInstance = vm.$fiery\n\n    options.id = ++fiery.optionKeyNext\n\n    fiery.options[options.id] = options as FieryOptions\n  }\n\n  return options as FieryOptions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options.ts","\nimport { FieryVue, FieryOptions, FieryEntry, FieryData, FierySource } from './types'\nimport { getMetadata, forEach } from './util'\n\n\nexport function update(this: FieryVue, data: FieryData, fields?: string[]): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    const values: FieryData = getValues(data, options, fields)\n\n    return store.doc(path).update(values)\n  }\n}\n\nexport function sync(this: FieryVue, data: FieryData, fields?: string[]): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    const values = getValues(data, options, fields)\n\n    return store.doc(path).set(values)\n  }\n}\n\nexport function remove(this: FieryVue, data: FieryData, excludeSubs: boolean = false): Promise<void> | undefined\n{\n  const { store, path, options } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    if (!excludeSubs && options.sub)\n    {\n      for (let subProp in options.sub)\n      {\n        forEach(data[subProp], (sub) =>\n        {\n          this.remove(sub as FieryData)\n        })\n      }\n    }\n\n    return store.doc(path).delete()\n  }\n}\n\nexport function ref(this: FieryVue, data: FieryData, sub?: string): FierySource | undefined\n{\n  const { store, path } = getMetadata(this, data)\n\n  if (store && path)\n  {\n    let doc = store.doc(path)\n\n    return sub ? doc.collection(sub) : doc\n  }\n}\n\nexport function getValues(data: FieryData, options: FieryOptions, fields?: string[]): FieryData\n{\n  const explicit: string[] = fields || options.include\n  const values: FieryData = {}\n\n  if (explicit)\n  {\n    for (let i = 0; i < explicit.length; i++)\n    {\n      let prop: string = explicit[i]\n\n      if (prop in data)\n      {\n        values[prop] = data[prop]\n      }\n    }\n  }\n  else\n  {\n    for (let prop in data)\n    {\n      if (!(prop in options.exclude))\n      {\n        values[prop] = data[prop]\n      }\n    }\n  }\n\n  return values\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/operations.ts","\n\nimport { FieryVue, FieryEntry, FieryTarget, FierySource, FieryInstanceFactory, FieryOptions } from '../types'\nimport { getEntry } from '../entry'\n\n\n\nimport factoryDocument from './document'\nimport factoryMap from './map'\nimport factoryCollection from './collection'\n\n\n\nexport function factory (vm: FieryVue, entry: FieryEntry): FieryTarget\n{\n  let chosenFactory = (<any>entry.source).where\n    ? (entry.options.map ? factoryMap : factoryCollection)\n    : factoryDocument\n\n  return chosenFactory(vm, entry)\n}\n\nexport function factoryInstance (vm: FieryVue): FieryInstanceFactory\n{\n  return (source: FierySource, options?: Partial<FieryOptions>): FieryTarget => {\n    return factory(vm, getEntry(vm, source, options))\n  }\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/index.ts","\nimport * as firebase from 'firebase'\n\n\nimport { FieryOptions, FieryEntry, FieryData, FieryVue } from '../types'\nimport { refreshDocument } from '../documents'\n\n\n\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype DocumentChange = firebase.firestore.DocumentChange\ntype DocumentReference = firebase.firestore.DocumentReference\ntype DocumentListenOptions = firebase.firestore.DocumentListenOptions\n\n\n\nexport function factory (vm: FieryVue, entry: FieryEntry): FieryData\n{\n  const source: DocumentReference = entry.source as DocumentReference\n  const options: FieryOptions = entry.options\n\n  if (options.once)\n  {\n    entry.promise = source.get(options.onceOptions)\n      .then((doc: DocumentSnapshot) =>\n      {\n        handleDocumentUpdate(vm, entry, doc)\n\n      }).catch(options.onError)\n  }\n  else\n  {\n    entry.off = source.onSnapshot(options.liveOptions as DocumentListenOptions,\n      (doc: DocumentSnapshot) =>\n      {\n        handleDocumentUpdate(vm, entry, doc)\n\n      }, options.onError)\n  }\n\n  return entry.target as FieryData\n}\n\nexport function handleDocumentUpdate(vm: FieryVue, entry: FieryEntry, doc: DocumentSnapshot): void\n{\n  const options: FieryOptions = entry.options\n\n  if (!doc.exists)\n  {\n    options.onMissing()\n  }\n  else\n  {\n    entry.target = refreshDocument(vm, entry, doc, entry.target)\n\n    if (options.reset && options.property)\n    {\n      vm[options.property] = entry.target\n    }\n\n    options.onSuccess(entry.target)\n  }\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/document.ts","\nimport * as firebase from 'firebase'\n\n\n\nimport { PROP_UID, UID_SEPARATOR, STORE_SEPARATOR, ENTRY_SEPARATOR } from './constants'\nimport { FieryOptions, FieryInstance, FieryEntry, FieryData, FieryMap, FieryVue } from './types'\nimport { isObject, forEach, getMetadata, createRecord } from './util'\nimport { closeEntry, getEntry } from './entry'\nimport { factory } from './factory'\n\n\n\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype Firestore = firebase.firestore.Firestore\n\n\n\nexport function parseDocument(doc: DocumentSnapshot, options: FieryOptions): FieryData\n{\n  let value = doc.data()\n  let out = (isObject(value) ? value : { [options.propValue]: value }) as FieryData\n\n  if (out && options.key)\n  {\n    out[options.key] = doc.id\n  }\n\n  return out\n}\n\nexport function refreshDocument(vm: FieryVue, entry: FieryEntry, doc: DocumentSnapshot, data?: FieryData): FieryData\n{\n  const options: FieryOptions = entry.options\n  const property: string | undefined = options.property\n  const replace: boolean = !!(options.reset && property)\n  const encoded: FieryData = parseDocument(doc, options)\n\n  if (!data)\n  {\n    const identifier: string = getDocumentIdentifier(vm, options, doc)\n\n    data = options.newDocument(encoded)\n\n    data[PROP_UID] = identifier\n\n    copyData(vm, data, encoded)\n    createRecord(data, options)\n\n    if (options.sub)\n    {\n      for (let subProp in options.sub)\n      {\n        let subOptions: FieryOptions = options.sub[subProp]\n        let subEntryKey: string = doc.ref.path + ENTRY_SEPARATOR + subProp\n        let subEntry: FieryEntry = getEntry(vm, doc.ref.collection(subProp), subOptions, subEntryKey, true)\n\n        data[subProp] = factory(vm, subEntry)\n      }\n    }\n  }\n  else if (replace)\n  {\n    const replaced: FieryData = options.newDocument(encoded)\n\n    if (options.sub)\n    {\n      for (let subProp in options.sub)\n      {\n        if (data[subProp])\n        {\n          replaced[subProp] = data[subProp]\n        }\n      }\n    }\n\n    createRecord(replaced, options)\n\n    data = copyData(vm, replaced, encoded)\n  }\n  else\n  {\n    copyData(vm, data, encoded)\n  }\n\n  return data\n}\n\nexport function copyData(vm: FieryVue, data: FieryData, update: FieryData): FieryData\n{\n  for (let prop in update)\n  {\n    vm.$set(data, prop, update[prop])\n  }\n\n  return data\n}\n\nexport function destroyDocuments(vm: FieryVue, map: FieryMap, fromObject?: FieryMap): void\n{\n  for (let id in map)\n  {\n    const old: FieryData = map[id]\n\n    destroyDocument(vm, old)\n\n    if (fromObject)\n    {\n      vm.$delete(fromObject, id)\n    }\n  }\n}\n\nexport function destroyDocument(vm: FieryVue, data: FieryData): void\n{\n  let { path, options } = getMetadata(vm, data)\n\n  if (options.sub)\n  {\n    const fiery: FieryInstance = vm.$fiery\n\n    for (let subProp in options.sub)\n    {\n      let subEntryKey: string = path + ENTRY_SEPARATOR + subProp\n      let subEntry: FieryEntry = fiery.entry[ subEntryKey ]\n\n      if (subEntry)\n      {\n        closeEntry(subEntry)\n\n        delete fiery.entry[ subEntryKey ]\n\n        if (typeof subEntry.index === 'number')\n        {\n          fiery.entryList[subEntry.index] = null\n\n          delete subEntry.index\n        }\n      }\n\n      forEach(data[subProp], (value) =>\n      {\n        destroyDocument(vm, value)\n      })\n    }\n  }\n}\n\nexport function getDocumentIdentifier(vm: FieryVue, options: FieryOptions, doc: DocumentSnapshot)\n{\n  return getStoreKey(vm, doc) +\n    UID_SEPARATOR +\n    options.id +\n    UID_SEPARATOR +\n    doc.ref.path\n}\n\nexport function getStoreKey(vm: FieryVue, doc: DocumentSnapshot): number\n{\n  const firestore = (<any>doc)._firestore\n  const db = firestore._databaseId\n  const id: string = db.database + STORE_SEPARATOR + db.projectId\n\n  const fiery: FieryInstance = vm.$fiery\n  let key: number = fiery.storeIdToKey[id]\n\n  if (!key)\n  {\n    key = ++fiery.storeKeyNext\n    fiery.stores[key] = firestore\n    fiery.storeIdToKey[id] = key\n  }\n\n  return key\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/documents.ts","\nimport * as firebase from 'firebase'\n\n\n\nimport { PROP_UID } from '../constants'\nimport { FieryVue, FieryEntry, FieryTarget, FieryData, FieryOptions, FieryMap } from '../types'\nimport { refreshDocument, destroyDocuments, destroyDocument } from '../documents'\n\n\n\ntype Query = firebase.firestore.Query\ntype QuerySnapshot = firebase.firestore.QuerySnapshot\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype DocumentChange = firebase.firestore.DocumentChange\ntype CollectionReference = firebase.firestore.CollectionReference\ntype QueryListenOptions = firebase.firestore.QueryListenOptions\n\n\n\nfunction factory (vm: FieryVue, entry: FieryEntry): FieryMap\n{\n  type CollectionQuery = CollectionReference | Query\n  const options: FieryOptions = entry.options\n  const query: CollectionQuery = (options.query ? options.query(entry.source) : entry.source) as CollectionQuery\n\n  if (options.once)\n  {\n    entry.promise = query.get(options.onceOptions)\n      .then((querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryMap = entry.target as FieryMap\n\n        let missing: FieryMap = {}\n        for (let id in target) {\n          missing[id] = target[id]\n        }\n\n        querySnapshot.forEach((doc: DocumentSnapshot) =>\n        {\n          const old: FieryData = target[doc.id]\n          const updated: FieryData = refreshDocument(vm, entry, doc, old)\n\n          vm.$set(target, doc.id, updated)\n          delete missing[doc.id]\n\n        }, options.onError)\n\n        destroyDocuments(vm, missing, target)\n\n        options.onSuccess(target)\n\n      }).catch(options.onError)\n  }\n  else\n  {\n    entry.off = query.onSnapshot(options.liveOptions as QueryListenOptions,\n      (querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryMap = entry.target as FieryMap\n\n        (<any>querySnapshot).docChanges().forEach((change: DocumentChange) =>\n        {\n          const doc: DocumentSnapshot = change.doc\n\n          switch (change.type) {\n            case 'modified':\n            case 'added':\n              const old: FieryData = target[doc.id]\n              const updated: FieryData = refreshDocument(vm, entry, doc, old)\n              vm.$set(target, doc.id, updated)\n              break\n            case 'removed':\n              destroyDocument(vm, target[doc.id])\n              vm.$delete(target, doc.id)\n              break\n          }\n        }, options.onError)\n\n        options.onSuccess(target)\n\n      }, options.onError)\n  }\n\n  return entry.target as FieryMap\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/map.ts","\nimport * as firebase from 'firebase'\n\n\nimport { PROP_UID } from '../constants'\nimport { FieryVue, FieryEntry, FieryTarget, FieryData, FieryOptions, FieryMap } from '../types'\nimport { refreshDocument, destroyDocuments } from '../documents'\n\n\n\ntype Query = firebase.firestore.Query\ntype QuerySnapshot = firebase.firestore.QuerySnapshot\ntype DocumentSnapshot = firebase.firestore.DocumentSnapshot\ntype DocumentChange = firebase.firestore.DocumentChange\ntype CollectionReference = firebase.firestore.CollectionReference\ntype QueryListenOptions = firebase.firestore.QueryListenOptions\n\n\n\nexport function factory (vm: FieryVue, entry: FieryEntry): FieryData[]\n{\n  type CollectionQuery = CollectionReference | Query\n  const options: FieryOptions = entry.options\n  const query: CollectionQuery = (options.query ? options.query(entry.source) : entry.source) as CollectionQuery\n\n  if (options.once)\n  {\n    entry.promise = query.get(options.onceOptions)\n      .then((querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryData[] = entry.target as FieryData[]\n\n        const missing: FieryMap = {}\n\n        for (let i = 0; i < target.length; i++)\n        {\n          const old: FieryData = target[i]\n          missing[old[PROP_UID]] = old\n        }\n\n        target.splice(0, target.length);\n\n        querySnapshot.forEach((doc: DocumentSnapshot) =>\n        {\n          const old = missing[doc.id]\n          const updated = refreshDocument(vm, entry, doc, old)\n\n          target.push(updated)\n          delete missing[updated[PROP_UID]]\n\n        }, options.onError)\n\n        destroyDocuments(vm, missing)\n\n        options.onSuccess(target)\n\n      }).catch(options.onError)\n  }\n  else\n  {\n    entry.off = query.onSnapshot(options.liveOptions as QueryListenOptions,\n      (querySnapshot: QuerySnapshot) =>\n      {\n        const target: FieryData[] = entry.target as FieryData[]\n\n        (<any>querySnapshot).docChanges().forEach((change: DocumentChange) =>\n        {\n          const doc: DocumentSnapshot = change.doc\n\n          switch (change.type) {\n            case 'added':\n              const created: FieryData = refreshDocument(vm, entry, doc)\n              target.splice(change.newIndex, 0, created)\n              break\n            case 'removed':\n              target.splice(change.oldIndex, 1)\n              break\n            case 'modified':\n              const old: FieryData = target[change.oldIndex]\n              const updated: FieryData = refreshDocument(vm, entry, doc, old)\n\n              if (change.oldIndex !== change.newIndex) {\n                target.splice(change.oldIndex, 1)\n                target.splice(change.newIndex, 0, updated)\n              } else {\n                target.splice(change.newIndex, 1, updated)\n              }\n              break\n          }\n        }, options.onError)\n\n        options.onSuccess(target)\n\n      }, options.onError)\n  }\n\n  return entry.target as FieryData[]\n}\n\nexport default factory\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory/collection.ts"],"sourceRoot":""}